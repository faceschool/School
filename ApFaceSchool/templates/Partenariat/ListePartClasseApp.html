{% extends "Menus/MenuEspaceApp.html" %}
{% block content %}
{% load static %}

<div class="container-fluid">

    <hr>
 <div class="m-3"><center><img  width="5%" src="https://www.egfbtp.com/wp-content/uploads/2021/06/partenariat.jpg" class="img-fluid"   alt="FaceSchool"/><b class="titre-principal">Mes Classes Partenaires</b></center></div>
  <hr>
    <div class="row m-3">
         <div class="col-md-6 col-xs-6 col-sm-6 col-lg-6  table-responsive shadow mb-1">
            <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12 ">
                {% if messages %}
                    {% for message in messages %}
                        <div class="alert alert-{{ message.tags }} shadow">{{ message }}</div>
                    {% endfor %}
                {% endif%}
            </div>

            <table class="table table-striped table-bordered table-responsive">
              <thead class="table-success">
                <tr>
                  <!--th>#</th-->
                  <th width="15%">Classes Partenaires</th>
                  <th width="15%">Etablissement</th>
                  <th>Responsable</th>
                  <th width="25%">Documents Partenaires</th>
                  <th width="25%">SUPPRIMER</th>

                </tr>
              </thead>
              <tbody class="table-group-divider">
                    {% for Listes in ListePartenariats %}
                        {% if  Listes.ProfPartenaire_id == request.user.id %}
                              <tr>
                                  <!--td>{{ Listes.id }}</td-->
                                  <td width="15%"> <b style="color: red" > {{ Listes.ClassDemandeur.NomClasse}}-{{ Listes.ClassDemandeur.id}} </b><=>{{ Listes.ClassPartenaire.NomClasse}}-{{ Listes.ClassPartenaire.id}}</td>
                                  <td>{{Listes.ClassDemandeur.CodeEts}}</td>
                                  <td>{{Listes.ClassDemandeur.ChefClasse}}</td>
                                  <td width="35%">
                                    <center>  <a  href="{% url 'ListeDocumentPart' Listes.ClassDemandeur_id  %}"><img width="15%" src="https://static.vecteezy.com/ti/vecteur-libre/t1/8292836-dossier-avec-documents-emploi-entreprise-et-finance-embauche-dossier-de-documents-avec-feuilles-de-papier-et-notes-adhesives-illustration-de-dessin-anime-isoler-sur-fond-blanc-vectoriel.jpg" class="img-fluid" alt="FaceSchool"/></a></center>
                                  </td>
                                  <td width="35%">
                                    <center> <a class="nav-link text-white" onclick="return confirm('Voulez-vous vraiment supprimer ?')" href="{% url 'SuppPartenariat' Listes.id %}"><img width="15%" src="{% static 'images/Logo/corbeille.png' %}" alt="FaceSchool"/></a></center>
                                  </td>
                              </tr>
                        {% endif %}
                        {% if   Listes.ProfDemandeur_id  == request.user.id %}
                            <tr>
                                  <!--td>{{ Listes.id }}</td-->
                                  <td><b style="color: red">{{ Listes.ClassPartenaire.NomClasse}}-{{ Listes.ClassPartenaire.id}}</b> <=> {{Listes.ClassDemandeur.NomClasse}}-{{ Listes.ClassDemandeur.id}}</td>
                                  <td>{{Listes.ClassPartenaire.CodeEts}}</td>
                                  <td>{{Listes.ClassPartenaire.ChefClasse}}</td>
                                  <td width="15%">
                                     <center> <a   href="{% url 'ListeDocumentPart' Listes.ClassPartenaire_id  %}"><img width="15%" src="https://static.vecteezy.com/ti/vecteur-libre/t1/8292836-dossier-avec-documents-emploi-entreprise-et-finance-embauche-dossier-de-documents-avec-feuilles-de-papier-et-notes-adhesives-illustration-de-dessin-anime-isoler-sur-fond-blanc-vectoriel.jpg" class="img-fluid" alt="FaceSchool"/></a></center>
                                  </td>
                                  <td width="15%">
                                   <center>   <a class="nav-link text-white" onclick="return confirm('Voulez-vous vraiment supprimer ?')" href="{% url 'SuppPartenariat' Listes.id %}"><img width="15%" src="{% static 'images/Logo/corbeille.png' %}" alt="FaceSchool"/></a></center>
                                  </td>
                              </tr>

                        {% endif %}

                   {% empty %}
                       <tr><td colspan="30">Aucun partenariat trouvé.</td></tr>
                 {% endfor %}
              </tbody>
            </table>
         </div>

        <!--Document par classe-->
        {% if DocClass  %}
        <div class="col-md-5 col-xs-5 col-sm-5 col-lg-5 m-2 table-responsive shadow">
            <center> ====<b> <label for="id_Nom" class="form-label">CLASSE :</label></b>
              [ {{ nomclasse}}-{{ pk }}]====</center>
            <hr>
            <div><center>Vous pouvez trier par Type de document en selectionnant le Types ci-dessous.</center></div>

             <form method="POST" enctype="multipart/form-data" action="{% url 'ListeDocumentPartFil' pk  %}" class="p-4 shadow rounded bg-light">
                 {% csrf_token %}
              <center><b><label for="Type" class="form-label">Type document :</label></b>
                <select class="form-select" name="Type" id="Type">
                    {% for type in MesTypes %}
                         <option value="{{type.TypeDoc}}">{{type.TypeDoc}}</option>
                     {% endfor %}
                 </select>

                  <button type="submit" class="btn btn-primary">OK</button></center>
              </form>

            {% if type_doc  %}
                <div><center> Trié par :<b>[{{type_doc}}]</b></center></div>
            {% endif  %}
               <table class="table table-striped table-bordered">
                  <thead class="table-success">
                    <tr>
                      <!--th>#</th-->
                      <th>Discipline</th>
                        <!--th>Niveau</th-->
                      <th>Titre</th>
                      <th>Type</th>
                         <th>documents</th>

                    </tr>
                  </thead>
                  <tbody>
                    {% for doc in DocClass %}
                        <tr>
                          <!--th scope="row">{{doc.id}}</th-->
                          <td>{{doc.Discipline}}</td>
                            <!--td>{{doc.Niveau}}</td-->
                             <td>{{doc.Titre}}</td>
                          <td>{{doc.TypeDoc}}</td>
                          <td>
                            <a href="{{ doc.Document.url }}" download>Télécharger</a>
                         </td>
                        </tr>
                         {% empty %}
                       <tr><td colspan="3">Aucun document.</td></tr>
                    {% endfor %}
                  </tbody>
               </table>
        </div>

        {% endif %}
    </div>

</div>

{% endblock content %}