{% load static %}
<div class="bg-white rounded shadow-sm p-3 mb-4">
  <div class="text-center mb-3">
    <img src="https://img.freepik.com/vecteurs-premium/icone-classe-etudiants-illustration-3d-collection-retour-ecole-icone-classe-creative-etudiants-3d-pour-modeles-conception-web-infographie-plus-encore_676904-3130.jpg" width="60" class="mb-2">
    <h4 class="text-primary fw-bold">Mes Classes</h4>
  </div>

  {% if MesClasses %}
    <div class="table-responsive">
      <table class="table table-striped table-bordered">
        <thead class="table-success text-center">
          <tr>
            <th>ID</th>
            <th>Classe</th>
            <th>Niveau</th>
            <th>Effectif</th>
            <th>Chef de classe</th>
            <th>Code Invitation</th>
          </tr>
        </thead>
        <tbody>
          {% for clas in MesClasses %}
          <tr>
            <td>{{ clas.id }}</td>
            <td>{{ clas.NomClasse }}</td>
            <td>{{ clas.Niveau }}</td>
            <td>{{ clas.Effectif }}</td>
            <td>{{ clas.ChefClasse }}</td>
            <td class="text-center fw-bold">{{ clas.CodeAffect }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p class="text-center text-danger">Aucune classe trouvée.</p>
  {% endif %}
</div>

<hr>

<!-- Classes partenaires -->
<div class="bg-white rounded shadow-sm p-3 mb-4">
  <div class="text-center mb-3">
    <img src="https://www.egfbtp.com/wp-content/uploads/2021/06/partenariat.jpg" width="80" class="mb-2">
    <h4 class="text-primary fw-bold">Mes Classes Partenaires</h4>
  </div>

  {% if MesClasPart %}
    {% for clas in MesClasPart %}
      <h6 class="fw-bold text-danger">[{{ clas.id }} - {{ clas.NomClasse }}]</h6>
      <div class="table-responsive">
        <table class="table table-striped table-bordered">
          <thead class="table-success text-center">
            <tr>
              <th>ID</th>
              <th>Classe Partenaire</th>
              <th>Établissement</th>
              <th>Responsable</th>
              <th>Documents</th>
            </tr>
          </thead>
          <tbody>
            {% for Listes in ListePartenariats %}
              {% if Listes.ClassPartenaire_id == clas.id or Listes.ClassDemandeur_id == clas.id %}
                <tr>
                  <td>{{ Listes.ClassDemandeur.id|default:Listes.ClassPartenaire.id }}</td>
                  <td class="{% if clas.username_id == request.user.id %}text-primary{% else %}text-danger{% endif %}">
                    {{ Listes.ClassDemandeur.NomClasse|default:Listes.ClassPartenaire.NomClasse }}
                  </td>
                  <td>{{ Listes.ClassDemandeur.CodeEts|default:Listes.ClassPartenaire.CodeEts }}</td>
                  <td>{{ Listes.ClassDemandeur.ChefClasse|default:Listes.ClassPartenaire.ChefClasse }}</td>
                  <td class="text-center">
                    <a href="{% url 'ListeDocumentPartMaClasse' Listes.ClassDemandeur_id|default:Listes.ClassPartenaire_id %}">
                      <img src="https://static.vecteezy.com/ti/vecteur-libre/t1/8292836-dossier-avec-documents-emploi-entreprise-et-finance-embauche-dossier-de-documents-avec-feuilles-de-papier-et-notes-adhesives-illustration-de-dessin-anime-isoler-sur-fond-blanc-vectoriel.jpg"
                        alt="Documents" width="40">
                    </a>
                  </td>
                </tr>
              {% endif %}
            {% empty %}
              <tr><td colspan="5" class="text-center text-danger">Aucun partenariat trouvé.</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% endfor %}
  {% else %}
    <p class="text-center text-danger">Aucun partenariat trouvé.</p>
  {% endif %}
</div>

<hr>

<!-- Documents par classe -->
<div class="bg-white rounded shadow-sm p-3 mb-4">
  <div class="text-center mb-3">
    <img src="https://static.vecteezy.com/ti/vecteur-libre/t1/8292836-dossier-avec-documents-emploi-entreprise-et-finance-embauche-dossier-de-documents-avec-feuilles-de-papier-et-notes-adhesives-illustration-de-dessin-anime-isoler-sur-fond-blanc-vectoriel.jpg" width="50">
    <h4 class="text-primary fw-bold">Mes Documents par Classe</h4>
  </div>

  {% for clas in MesClas %}
    <h6 class="fw-bold text-danger">[{{ clas.id }} - {{ clas.NomClasse }}]</h6>
    <div class="table-responsive">
      <table class="table table-striped table-bordered">
        <thead class="table-success text-center">
          <tr>
            <th>Discipline</th>
            <th>Niveau</th>
            <th>Titre</th>
            <th>Type</th>
            <th>Document</th>
          </tr>
        </thead>
        <tbody>
          {% for doc in DocClass %}
            {% if doc.maclasse.id == clas.id %}
              <tr>
                <td>{{ doc.Discipline }}</td>
                <td>{{ doc.Niveau }}</td>
                <td>{{ doc.Titre }}</td>
                <td>{{ doc.TypeDoc }}</td>
                <td>
                  {% if doc.Document %}
                    <a href="{{ doc.Document.url }}" download class="btn btn-sm btn-outline-primary">Télécharger</a>
                  {% else %}
                    Aucun document
                  {% endif %}
                </td>
              </tr>
            {% endif %}
          {% empty %}
            <tr><td colspan="5" class="text-center text-danger">Aucun document trouvé.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% empty %}
    <p class="text-center text-danger">Aucun document trouvé.</p>
  {% endfor %}
</div>
