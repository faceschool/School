{% extends "Menus/Menu.html" %}
{% block content %}
{% load static %}
<div class="container mt-4">
<h3>Gestion des demandes de quota</h3>
<p class="text-muted">Liste des demandes récentes. Cliquez sur "Traiter" pour approuver/refuser.</p>


<table class="table table-striped table-bordered mt-3">
<thead class="table-dark">
<tr>
<th>ID</th>
<th>Utilisateur</th>
<th>Demandé (Go)</th>
<th>Prix</th>
<th>Statut</th>
<th>Statut paiement</th>
<th>Créé le</th>
<th>Actions</th>
</tr>
</thead>
<tbody>
{% for qr in requests %}
<tr>
<td>{{ qr.id }}</td>
<td>{{ qr.user.get_full_name|default:qr.user.username }}</td>
<td>{{ qr.requested_gb }}</td>
<td>{{ qr.price }}</td>
<td>{{ qr.status }}</td>
<td>{{ qr.payment_status }}</td>
<td>{{ qr.created_at|date:"Y-m-d H:i" }}</td>
<td>
<a href="{% url 'admin_process_request' qr.id %}" class="btn btn-sm btn-primary">Traiter</a>
</td>
</tr>
{% empty %}
<tr>
<td colspan="8" class="text-center">Aucune demande trouvée.</td>
</tr>
{% endfor %}
</tbody>
</table>


<!-- pagination (facultatif) -->
{% if is_paginated %}
<nav>
<ul class="pagination">
{% if page_obj.has_previous %}
<li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">Préc</a></li>
{% endif %}
<li class="page-item active"><span class="page-link">{{ page_obj.number }}</span></li>
{% if page_obj.has_next %}
<li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">Suiv</a></li>
{% endif %}
</ul>
</nav>
{% endif %}


</div>
{% endblock %}