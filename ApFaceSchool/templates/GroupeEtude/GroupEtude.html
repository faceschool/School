{% extends "Menus/MenuEspaceApp.html" %}
{% block content %}
{% load static %}

<div class="container-fluid">
    <h4 class="col-md-2 col-xs-2 col-sm-2 col-lg-2 mt-2 shadow"><b>VOTRE ESPACE GROUPE D'ETUDE</b></h4>
    <hr>
    <div class="row">
        <div class="col-md-2 col-xs-2 col-sm-2 col-lg-2 m-2 shadow">
             <form method="post" enctype="multipart/form-data">
                 <b style="color: red">CREER UN GROUPE D'ETUDE</b>
                 <hr>
                  {% csrf_token %}
                        {% if form.non_field_errors %}
                            <div>
                                {% for error in form.non_field_errors %}
                                    <p>error</p>
                                {% endfor %}
                            </div>
                        {% endif %}

                     {% if messages %}
                        {% for message in messages %}
                        <div class="alert alert-{{ message.tags }} shadow">{{ message }}</div>
                        {% endfor %}
                    {% endif%}

                         <div class="form-group">
                            <b><label for="nomAp" class="form-label">Nom Groupe (*)</label></b>
                            <input type="text" class="form-control @error('NomGroupe') is-invalid @enderror" id="NomGroupe" name="NomGroupe" maxlength="25" required>
                        </div>
                         <div class="form-group">
                            <b><label for="nomAp" class="form-label">Responsable</label></b>
                            <input type="text" class="form-control @error('Responsable') is-invalid @enderror" id="nomForm" name="Responsable" maxlength="30" required>
                        </div>
                         <div class="form-group">
                           <b> <label for="nomAp" class="form-label"> Contact</label></b>
                            <input type="text" class="form-control @error('Contact') is-invalid @enderror" id=" Contact" name="Contact" maxlength="30">
                        </div>
                          <div class="form-group">
                           <b> <label for="nomAp" class="form-label"> Niveau</label></b>
                              <select class="form-select" name="Niveau" id="validationCustom10">
                                  {% for niv in Nivo %}
                                        <option value="{{ niv.niveau }}">{{ niv.niveau }}</option>
                                  {% endfor %}
                              </select>
                        </div>
                         <div class="form-group">
                           <b> <label  class="form-label"> Etablissement</label></b>
                            <input type="text" class="form-control @error('Etablissement') is-invalid @enderror" id="Etablissement" name="Etablissement" maxlength="25" required>
                        </div>
                         <div class="form-group">
                           <b> <label for=" CodeAffect" class="form-label"> Code Invitation</label></b>
                            <input type="text" class="form-control @error('CodeAffect') is-invalid @enderror" id="CodeAffect" name="CodeAffect" maxlength="10" required>
                        </div>
                         <div class="form-group">
                           <b> <label for=" CodeAffect" class="form-label"> Logo</label></b>
                            <input type="file" class="form-control @error(' logo') is-invalid @enderror" id="logo" name="logo" maxlength="10" required>
                        </div>
                 <button type="submit" class="btn btn-primary m-3">Enregistrer</button>
             </form>
         </div>
        <div class="col-md-9 col-xs-9 col-sm-9 col-lg-9  table-responsive">
        <b style="color :blue"> MES GROUPES D'ETUDE</b>
            <hr>

            {% if Mesgroupes %}

              <table class="table table-striped table-bordered shadow">
                  <thead class="table-success">
                    <tr>
                      <th>#</th>
                      <th>logo</th>
                      <th width="10%">Groupe</th>
                      <th>Niveau</th>
                      <th>Ets</th>
                      <th>Responsable</th>
                      <th>Contact</th>
                       <th>Code Invité</th>
                       <th>Modifier</th>
                        <th>Apprenant</th>
                         <th>Documents</th>
                        <th>Supprimer</th>
                         <th>Partenariat</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for group in Mesgroupes %}
                        <tr>
                          <td>{{group.id}}</td>
                          <td><img src="{{group.logo.url }}" alt="Photo" width="50"></td>
                          <td>{{group.Groupe}}</td>
                          <td>{{group.Niveau_id}}</td>
                          <td>{{group.Etablissement}}</td>
                          <td>{{group.Responsable}}</td>
                          <td>{{group.Contact}}</td>
                          <td>{{group.CodeAffect}}</td>
                          <td>

                             <center> <a href="{% url 'ModifGroupeEtude' group.id %}"><img  width="30%" src="{% static 'images/Logo/modifier.png' %}"  alt="FaceSchool"/></a></center>

                          </td>
                            <td>
                             <center> <a  href="{% url 'AjouterApprenGrpEtude' group.id %}">
                                <i class="bi bi-person-add"></i></a></center>
                          </td>
                            <td>
                             <center><a  href="{% url 'Ajouter_dossiersGrpEtude' group.id %}"><img  width="30%" src="https://static.vecteezy.com/ti/vecteur-libre/t1/8292836-dossier-avec-documents-emploi-entreprise-et-finance-embauche-dossier-de-documents-avec-feuilles-de-papier-et-notes-adhesives-illustration-de-dessin-anime-isoler-sur-fond-blanc-vectoriel.jpg" class="img-fluid"  alt="FaceSchool"/></a></center>
                          </td>
                             <td>

                            <center> <a  onclick="return confirm('Voulez-vous vraiment supprimer ?')" href="{% url 'SupGroupeEtude' group.id %}">
                                <i class="bi bi-trash" ></i></a></center>

                             </td>
                         <td>
                             <center> <a  href="{% url 'CreerPartenariatGrpEtude' group.id %}"><img  width="45%" src="https://www.egfbtp.com/wp-content/uploads/2021/06/partenariat.jpg"    alt="FaceSchool"/></a></center>
                          </td>
                        </tr>
                    {% endfor %}
                  </tbody>
              </table>
             <hr>

          {% else %}
            <p style="color: red">Vous n'avez pas de Groupe d'etude</p>
         {% endif %}
          <!-- Pagination -->
                {% if Mesgroupes.has_other_pages %}
                <nav class="mt-2">
                    <ul class="pagination justify-content-center">
                        {% if Mesgroupes.has_previous %}
                            <li class="page-item"><a class="page-link" href="?page={{ Mesgroupes.previous_page_number }}">Précédent</a></li>
                        {% endif %}
                        {% for num in Mesgroupes.paginator.page_range %}
                            <li class="page-item {% if Mesgroupes.number == num %}active{% endif %}">
                                <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                            </li>
                        {% endfor %}
                        {% if Mesgroupes.has_next %}
                            <li class="page-item"><a class="page-link" href="?page={{ Mesgroupes.next_page_number }}">Suivant</a></li>
                        {% endif %}
                    </ul>
                </nav>
                {% endif %}
    </div>

    </div>

</div>
{% endblock content %}