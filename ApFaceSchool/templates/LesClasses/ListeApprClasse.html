{% extends "Menus/MenuEspaceApp.html" %}
{% block content %}
{% load static %}

<div class="container-fluid">
    <p><center style="color: red"><strong>Classe :</strong>  [ {{MClasses.NomClasse}} ]</center></p>
        <hr>
        {% if mesreunions %}
        <div class="row justify-content-center m-2" style="background-color: cyan">
            <div class="col-md-7 col-xs-7 col-sm-7 col-lg-7 mt-1 table-responsive shadow" >
                <h2 style="background-color: green; color: white">Réunion Google Meet Prévues</h2>

                {% for class in mesclasse %}
                  <p><b>Classe: </b><u style="color: red">[ {{ class.NomClasse }} ]</u></p>
                  <table class="table table-striped table-bordered table-responsive">
                   <thead class="table-success">
                    <tr>
                      <th>Titre</th>
                       <th width="40%">Description</th>
                      <th>Date debut</th>
                      <th>Date fin</th>
                      <th>Etat</th>
                      <th>Lien</th>
                      <!--th>Modifier</th-->
                    </tr>
                  </thead>
                    {% for reunion in mesreunions %}
                     {% if class.id ==  reunion.maclasse_id %}
                      <tr>
                      <td>{{ reunion.titre }}</td>
                      <td>{{ reunion.description }}</td>
                      <td>{{ reunion.date_debut|date:'d/m/Y H:i' }}</td>
                      <td>{{ reunion.date_fin|date:'d/m/Y H:i' }}</td>
                      {% if reunion.etat %}
                        <td style="color: red">Terminé</td>
                        <td></td>
                       {% else %}
                        <td style="color: blue">Prévu</td>
                         <td><a href="{{ reunion.meet_link }}" target="_blank">Rejoindre</a></td>
                      {% endif %}
                      </tr>
                      {% endif %}

                    {% endfor %}
                  </table>
                {% endfor %}
            </div>
        </div>
        <hr>
    {% endif %}

    <div class="row">
        <div class="col-md-6 col-xs-6 col-sm-6 col-lg-6">
           <div class="row justify-content-center">
              <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12">
                 {% if mesclasse %}
                   <div class="text-danger"><center><img  width="5%" src="https://static.vecteezy.com/ti/vecteur-libre/t1/8292836-dossier-avec-documents-emploi-entreprise-et-finance-embauche-dossier-de-documents-avec-feuilles-de-papier-et-notes-adhesives-illustration-de-dessin-anime-isoler-sur-fond-blanc-vectoriel.jpg"  alt="FaceSchool"/><b>Documents Classe</b></center></div>

                      <table class="table table-striped table-bordered table-responsive m-1">
                        <thead class="table-success">
                          <tr>
                            <th>#</th>
                            <th width="25%">Discipline</th>
                            <th width="25%">Niveau</th>
                            <th width="25%">Titre</th>
                            <th width="25%">Type</th>
                            <th>Document</th>
                            <th>Solution</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for doc in DocClass %}

                              <tr>
                                <td>{{ doc.id }}</td>
                                <td>{{ doc.Discipline }}</td>
                                <td>{{ doc.Niveau }}</td>
                                <td>{{ doc.Titre }}</td>
                                <td>{{ doc.TypeDoc }}</td>
                                <td>
                                  {% if doc.Document %}
                                    <a href="{{ doc.Document.url }}" download>Télécharger</a>
                                  {% else %}
                                    Aucun document
                                  {% endif %}
                                </td>
                               <td>
                                 {% if doc.TypeDoc != "Cours" %}
                                <center> <a  href="{% url 'Ajouter_Solution' doc.id %}"><img  width="30%" src="{% static 'images/Logo/plus.png' %}"  alt="FaceSchool"/></a></center>
                                {% endif %}
                               </td>
                              </tr>

                           {% empty %}
                            <tr><td colspan="30">Aucun document trouvé.</td></tr>
                          {% endfor %}
                        </tbody>
                      </table>
                        <hr>
                    {% endif %}
              </div>
           </div>
            <div class="row justify-content-center">
                <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12">
                    <div  style="background-color: #ADD8E6;"><center><b style="color: white">LISTE ELEVE DE LA CLASSE</b></center></div>

                      {% if ApprenClasses %}
                     <table class="table table-striped table-bordered">
                      <thead class="table-info">

                            <tr>
                                <th>#</th>
                              <th>Matricule</th>
                              <th>Nom</th>
                              <th>Prenom</th>
                              <th>Téléphone</th>
                              <th>Email</th>
                              <!--th>Operation</th-->
                            </tr>

                          </thead>
                          <tbody>

                            {% for Appren in ApprenClasses %}
                                <tr>
                                <th scope="row">{{ Appren.maclasse_id }}</th>
                                <th scope="row">{{ Appren.apprenant.Matricule }}</th>
                                <td>{{ Appren.apprenant.Nom }}</td>
                                <td>{{ Appren.apprenant.Prenom }}</td>
                                <td>{{ Appren.apprenant.Tel }}</td>
                                <td>{{ Appren.apprenant.Email }}</td>
                                <!--td>
                                 <a  href="">Ecrire</a>
                                </td-->
                                </tr>
                            {% empty %}
                                <p>Aucun Apprenant inscrit.</p>
                            {% endfor %}
                                  </tbody>
                                </table>
                                <center><b>Total :</b> [ {{ total_apprenants }} ]</center>
                             {% endif %}
                </div>
            </div>
        </div>
        <div class="col-md-6 col-xs-6 col-sm-6 col-lg-6">
            <div class="row">
                 <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12">

                         <div class="text-danger"><center><b style="color: green">INFOS CLASSE</b></center></div>
                        <BR>
                            <table class="table table-striped table-bordered">
                              <thead class="table-success">
                                <tr>
                                    <th width="10%">Date</th>
                                    <th width="15%">Objet</th>
                                    <th width="40%">Message</th>
                                </tr>
                              </thead>
                              <tbody>
                                {% for mess in  MessagesClasses %}
                                    <tr>
                                      <!--td>{{mess.id}}</td-->
                                     <td>
                                        {{mess.create_at|date:"d/m/Y H:i"}}
                                      </td>
                                      <td>{{mess.Objet}}</td>
                                      <td>{{mess.Message|linebreaksbr }}
                                        {% if mess.PiecesJointe %}
                                        <b><br>Piece Jointe:</b><a href="{{mess.PiecesJointe.url}}" download>Télécharger</a>
                                        {% endif %}
                                      </td>
                                    </tr>
                                {% empty %}
                                 <tr><td colspan="30">Vous n'avez aucun message.</td></tr>
                                {% endfor %}
                              </tbody>
                           </table>
                        </div>

                 </div>
                <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12">
                  <div class="m-3"><center><b style="color: red"><img  width="15%" src="https://www.egfbtp.com/wp-content/uploads/2021/06/partenariat.jpg" class="img-fluid"   alt="FaceSchool"/>Classes Partenaires</b></center></div>
                        <hr>
                        <div class="row">
                             <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12  table-responsive shadow mb-1">

                                <table class="table table-striped table-bordered table-responsive">
                                  <thead class="table-success">
                                    <tr>
                                      <!--th>#</th-->
                                      <th width="15%">Classes Partenaires</th>
                                      <th width="15%">Etablissement</th>
                                      <!--th>Responsable</th-->
                                      <th width="25%">Documents Partenaires</th>

                                    </tr>
                                  </thead>
                                  <tbody class="table-group-divider">
                                        {% for Listes in ListePartenariats %}
                                            {% if  Listes.ClassPartenaire_id == pk %}
                                                  <tr>
                                                      <!--td>{{ Listes.id }}</td-->
                                                      <td width="15%"> <b style="color: red" > {{ Listes.ClassDemandeur.NomClasse}}-{{ Listes.ClassDemandeur.id}} </b></td>
                                                      <td>{{Listes.ClassDemandeur.CodeEts}}</td>
                                                      <!--td>{{Listes.ClassDemandeur.ChefClasse}}</td-->
                                                      <td width="35%">
                                                        <center>  <a  href="{% url 'ListeDocumentPartMaClasse' Listes.ClassDemandeur_id  %}"><img width="15%" src="https://static.vecteezy.com/ti/vecteur-libre/t1/8292836-dossier-avec-documents-emploi-entreprise-et-finance-embauche-dossier-de-documents-avec-feuilles-de-papier-et-notes-adhesives-illustration-de-dessin-anime-isoler-sur-fond-blanc-vectoriel.jpg" class="img-fluid" alt="FaceSchool"/></a></center>
                                                      </td>

                                                  </tr>
                                            {% endif %}
                                            {% if   Listes.ClassDemandeur_id  == pk %}
                                                <tr>
                                                      <!--td>{{ Listes.id }}</td-->
                                                      <td><b style="color: red">{{ Listes.ClassPartenaire.NomClasse}}-{{ Listes.ClassPartenaire.id}}</b></td>
                                                      <td>{{Listes.ClassPartenaire.CodeEts}}</td>
                                                      <!--td>{{Listes.ClassPartenaire.ChefClasse}}</td-->
                                                      <td width="15%">
                                                         <center> <a   href="{% url 'ListeDocumentPartMaClasse' Listes.ClassPartenaire_id  %}"><img width="15%" src="https://static.vecteezy.com/ti/vecteur-libre/t1/8292836-dossier-avec-documents-emploi-entreprise-et-finance-embauche-dossier-de-documents-avec-feuilles-de-papier-et-notes-adhesives-illustration-de-dessin-anime-isoler-sur-fond-blanc-vectoriel.jpg" class="img-fluid" alt="FaceSchool"/></a></center>
                                                      </td>

                                                  </tr>

                                            {% endif %}

                                       {% empty %}
                                           <tr><td colspan="30">Aucun partenariat trouvé.</td></tr>
                                     {% endfor %}
                                  </tbody>
                                </table>
                             </div>


                        </div>
                  </div>
            </div>
        </div>
</div>
{% endblock content %}