{% extends "Menus/MenuEspaceApp.html" %}
{% block content %}
{% load static %}
<style>

    .bg-primary {
  background-color: #004080 !important;
}

h4 {
  font-size: 1.25rem;
}

.table th, .table td {
  vertical-align: middle !important;
}

.table {
  font-size: 0.9rem;
}

.btn, .table, .alert {
  border-radius: 10px;
}

hr {
  opacity: 0.5;
}

@media (max-width: 768px) {
  .table {
    font-size: 0.8rem;
  }

  h4 {
    font-size: 1rem;
  }

  .btn {
    font-size: 0.8rem;
    padding: 4px 8px;
  }

  img {
    max-width: 50px;
  }
}

</style>
<div class="container-fluid">

        <div class="row justify-content-center m-1" >
            <div class="row justify-content-center m-2">

  <!-- R√©unions Classe -->
  <div class="col-md-5 col-12 m-1 shadow rounded p-3 bg-info">
    <h4 class="text-center text-white mb-3">üìå R√©unions Classe Google Meet Pr√©vues</h4>
    {% if mesclasse %}
      {% for class in mesclasse %}
        <p><b class="text-danger">Classe :</b> <u class="text-white">[{{ class.NomClasse }}]</u></p>
        <div class="table-responsive">
          <table class="table table-striped table-bordered table-sm text-white">
            <thead class="table-success">
              <tr>
                <th>Titre</th>
                <th width="40%">Description</th>
                <th>Date debut</th>
                <th>Date fin</th>
                <th>Etat</th>
                <th>Lien</th>
              </tr>
            </thead>
            <tbody>
              {% for reunion in reunions_list %}
                {% if class.id == reunion.maclasse_id %}
                  <tr>
                    <td>{{ reunion.titre }}</td>
                    <td>{{ reunion.description }}</td>
                    <td>{{ reunion.date_debut|date:'d/m/Y H:i' }}</td>
                    <td>{{ reunion.date_fin|date:'d/m/Y H:i' }}</td>
                    {% if reunion.etat %}
                      <td class="text-danger fw-bold">Termin√©</td>
                      <td></td>
                    {% else %}
                      <td class="text-primary fw-bold">Pr√©vu</td>
                      <td><a href="{{ reunion.meet_link }}" target="_blank" class="btn btn-sm btn-outline-primary">Rejoindre</a></td>
                    {% endif %}
                  </tr>
                {% endif %}
              {% empty %}
                <tr>
                  <td colspan="6" class="text-center text-danger fw-bold">Aucune r√©union de classe pr√©vue</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      {% endfor %}
    {% else %}
      <div class="alert alert-danger text-center">Aucune classe trouv√©e.</div>
    {% endif %}
    <div class="text-center mt-2">
      <a href="{% url 'monespaceVideo' %}" class="btn btn-secondary">Historique R√©union</a>
    </div>
  </div>

  <!-- R√©unions Groupe √âtude -->
  <div class="col-md-5 col-12 m-1 shadow rounded p-3 bg-info" >
    <h4 class="text-center text-white mb-3">üìå R√©unions Groupe √âtude Google Meet Pr√©vues</h4>
    {% if MesGroupes %}
      {% for group in MesGroupes %}
        <p><b class="text-danger">Groupe √âtude :</b> <u class="text-white">[{{ group.Groupe }}]</u></p>
        <div class="table-responsive">
          <table class="table table-striped table-bordered table-sm text-white">
            <thead class="table-success">
              <tr>
                <th>Titre</th>
                <th width="40%">Description</th>
                <th>Date debut</th>
                <th>Date fin</th>
                <th>Etat</th>
                <th>Lien</th>
              </tr>
            </thead>
            <tbody>
              {% for reunion in mesreunionsEtudes %}
                {% if reunion.groupeetude_id == group.id %}
                  <tr>
                    <td>{{ reunion.titre }}</td>
                    <td>{{ reunion.description }}</td>
                    <td>{{ reunion.date_debut|date:'d/m/Y H:i' }}</td>
                    <td>{{ reunion.date_fin|date:'d/m/Y H:i' }}</td>
                    {% if reunion.etat %}
                      <td class="text-danger fw-bold">Termin√©</td>
                      <td></td>
                    {% else %}
                      <td class="text-primary fw-bold">Pr√©vu</td>
                      <td><a href="{{ reunion.meet_link }}" target="_blank" class="btn btn-sm btn-outline-primary">Rejoindre</a></td>
                    {% endif %}
                  </tr>
                {% endif %}
              {% empty %}
                <tr>
                  <td colspan="6" class="text-center text-danger fw-bold">Aucune r√©union de groupe pr√©vue</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      {% endfor %}
    {% else %}
      <div class="alert alert-danger text-center">Aucun groupe trouv√©.</div>
    {% endif %}
    <div class="text-center mt-2">
      <a href="{% url 'monespaceVideo' %}" class="btn btn-secondary">Historique R√©union</a>
    </div>
  </div>

</div>
 <hr>
             <!--Reunion Classe partenaire-->
           <div class="row justify-content-center m-1">

  <!-- Image de gauche -->
  <div class="col-md-3 col-12 m-1 shadow rounded text-center p-2">
    <img src="https://static.vecteezy.com/ti/vecteur-libre/p1/2779548-reunion-video-de-groupe-de-personnes-reunion-en-ligne-via-video-conference-travail-a-distance-technologie-concept-illustrationle-dans-un-style-plat-vectoriel.jpg" class="img-fluid rounded mb-2" alt="FaceSchool"/>
    <p><b class="text-danger">AVEC FACESCHOOL</b></p>
    <p><b class="text-primary">SUIVEZ VOS FORMATIONS PARTOUT</b></p>
  </div>

  <!-- Tableau des r√©unions partenaires -->
  <div class="col-md-5 col-12 m-1 shadow rounded p-3 bg-info" >
    <h4 class="text-center text-white mb-3">R√©unions Classe Partenaire Google Meet Pr√©vues</h4>

    {% if mesclasseP %}
      {% for class in mesclasseP %}
        <p><b class="text-danger">Classe :</b> <u class="text-white">[ {{ class.NomClasse }} ]</u></p>
        <div class="table-responsive">
          <table class="table table-striped table-bordered table-sm text-white">
            <thead class="table-success">
              <tr>
                <th>Titre</th>
                <th width="40%">Description</th>
                <th>Date debut</th>
                <th>Date fin</th>
                <th>Etat</th>
                <th>Lien</th>
              </tr>
            </thead>
            <tbody>
              {% for reunion in mesreunionParts %}
                {% if class.id == reunion.maclasse_id %}
                  <tr>
                    <td>{{ reunion.titre }}</td>
                    <td>{{ reunion.description }}</td>
                    <td>{{ reunion.date_debut|date:'d/m/Y H:i' }}</td>
                    <td>{{ reunion.date_fin|date:'d/m/Y H:i' }}</td>
                    {% if reunion.etat %}
                      <td class="text-danger fw-bold">Termin√©</td>
                      <td></td>
                    {% else %}
                      <td class="text-primary fw-bold">Pr√©vu</td>
                      <td><a href="{{ reunion.meet_link }}" target="_blank" class="btn btn-sm btn-outline-primary">Rejoindre</a></td>
                    {% endif %}
                  </tr>
                {% endif %}
              {% empty %}
                <tr>
                  <td colspan="6" class="text-center text-danger fw-bold">Aucune r√©union de classe partenaire pr√©vue</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      {% endfor %}
    {% else %}
      <div class="alert alert-danger text-center">Aucune classe partenaire trouv√©e.</div>
    {% endif %}
  </div>

  <!-- Image de droite -->
  <div class="col-md-3 col-12 m-1 shadow rounded text-center p-2">
    <img src="https://static.vecteezy.com/ti/vecteur-libre/p1/17115827-divers-employes-de-l-entreprise-ayant-un-appel-video-de-conference-d-affaires-en-ligne-sur-un-ecran-de-television-dans-la-salle-de-reunion-du-conseil-d-administration-presentation-par-videoconference-concept-global-de-formation-en-entreprise-de-groupe-virtuel-vectoriel.jpg" class="img-fluid rounded mb-2" alt="FaceSchool"/>
    <p><b class="text-primary">DESORMAIS FORMEZ-VOUS AUTREMENT</b></p>
  </div>

</div>

        <hr class="thicks-hr">

    <div class="row justify-content-left mt-3">
        <div class="col-md-6 col-xs-6 col-sm-6 col-lg-6 shadow">
            <div class="col-12 shadow p-3 rounded mb-4">
                <div class="text-center mb-3">
                    <img width="8%" src="https://img.freepik.com/vecteurs-premium/icone-classe-etudiants-illustration-3d-collection-retour-ecole-icone-classe-creative-etudiants-3d-pour-modeles-conception-web-infographie-plus-encore_676904-3130.jpg" alt="Mes Classes" class="img-fluid"/>
                    <h4 class="text-danger mt-2">Mes Classes</h4>
                </div>

                {% if MesClasses %}
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-sm">
                            <thead class="table-success">
                                <tr>
                                    <th>ID</th>
                                    <th>Classe</th>
                                    <th>Niveau</th>
                                    <th>Effectif</th>
                                    <th>Chef Classe</th>
                                    <th>Code Invitation</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for clas in MesClasses %}
                                    <tr>
                                        <td>{{ clas.id }}</td>
                                        <td>{{ clas.NomClasse }}</td>
                                        <td>{{ clas.Niveau }}</td>
                                        <td>{{ clas.Effectif }}</td>
                                        <td>{{ clas.ChefClasse }}</td>
                                        <td class="text-center">{{ clas.CodeAffect }}</td>
                                    </tr>
                                {% endfor %}


                            </tbody>
                        </table>
                         <div class="pagination">

                                    {% if mesclasse.has_previous %}
                                        <a class="btn btn-primary btn-sm" href="?page_classe={{ mesclasse.previous_page_number }}">Pr√©c√©dent</a>
                                    {% endif %}

                                    <span>Page {{ mesclasse.number }} / {{ mesclasse.paginator.num_pages }}</span>

                                    {% if mesclasse.has_next %}
                                        <a class="btn btn-primary btn-sm" href="?page_classe={{ mesclasse.next_page_number }}">Suivant</a>
                                    {% endif %}

                         </div>
                    </div>
                {% else %}
                    <div class="alert alert-danger text-center">Aucune classe trouv√©e.</div>
                {% endif %}
            </div>

            <hr class="thick-hr">
            <div class="col-12 shadow p-3 rounded mb-4">
    <div class="text-center mb-3">
        <img width="10%" src="https://www.egfbtp.com/wp-content/uploads/2021/06/partenariat.jpg" class="img-fluid" alt="Mes Classes Partenaires"/>
        <h4 class="text-danger mt-2">Mes Classes Partenaires</h4>
    </div>

    {% for clas in MesClas %}
        <div class="mb-2">
            <h5 class="text-primary">{{ clas.id }} - {{ clas.NomClasse }}</h5>
        </div>
        {% if ListePartenariats %}
            <div class="table-responsive">
                <table class="table table-striped table-bordered table-sm">
                    <thead class="table-success">
                        <tr>
                            <th>Classe Partenaire</th>
                            <th>Etablissement</th>
                            <th>Responsable</th>
                            <th>Documents</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in ListePartenariats %}
                            {% if item.ClassPartenaire_id == clas.id or item.ClassDemandeur_id == clas.id %}
                                <tr>
                                    {% if item.ClassPartenaire_id == clas.id %}
                                        <td>{{ item.ClassDemandeur.NomClasse }} - {{ item.ClassDemandeur.id }}</td>
                                        <td>{{ item.ClassDemandeur.CodeEts }}</td>
                                        <td>{{ item.ClassDemandeur.ChefClasse }}</td>
                                        <td class="text-center">
                                            <a href="{% url 'ListeDocumentPartMaClasse' item.ClassDemandeur_id %}">
                                                <img width="20%" src="https://static.vecteezy.com/ti/vecteur-libre/t1/8292836-dossier-avec-documents-emploi-entreprise-et-finance-embauche-dossier-de-documents-avec-feuilles-de-papier-et-notes-adhesives-illustration-de-dessin-anime-isoler-sur-fond-blanc-vectoriel.jpg" class="img-fluid" alt="Documents"/>
                                            </a>
                                        </td>
                                    {% else %}
                                        <td>{{ item.ClassPartenaire.NomClasse }} - {{ item.ClassPartenaire.id }}</td>
                                        <td>{{ item.ClassPartenaire.CodeEts }}</td>
                                        <td>{{ item.ClassPartenaire.ChefClasse }}</td>
                                        <td class="text-center">
                                            <a href="{% url 'ListeDocumentPartMaClasse' item.ClassPartenaire_id %}">
                                                <img width="20%" src="https://static.vecteezy.com/ti/vecteur-libre/t1/8292836-dossier-avec-documents-emploi-entreprise-et-finance-embauche-dossier-de-documents-avec-feuilles-de-papier-et-notes-adhesives-illustration-de-dessin-anime-isoler-sur-fond-blanc-vectoriel.jpg" class="img-fluid" alt="Documents"/>
                                            </a>
                                        </td>
                                    {% endif %}
                                </tr>
                            {% endif %}
                        {% empty %}
                            <tr>
                                <td colspan="4" class="text-center text-danger">Aucun partenariat trouv√©.</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <div class="alert alert-danger text-center">Aucun partenariat trouv√© pour cette classe.</div>
        {% endif %}
    {% endfor %}
</div>

            <hr class="thick-hr">
            <div class="col-12 shadow p-3 rounded mb-4">
    <div class="text-center mb-3">
        <img width="5%" src="https://static.vecteezy.com/ti/vecteur-libre/t1/8292836-dossier-avec-documents-emploi-entreprise-et-finance-embauche-dossier-de-documents-avec-feuilles-de-papier-et-notes-adhesives-illustration-de-dessin-anime-isoler-sur-fond-blanc-vectoriel.jpg" class="img-fluid" alt="Mes Documents Par Classe"/>
        <h4 class="text-danger mt-2">Mes Documents Par Classe</h4>
    </div>

    {% for clas in ClassDoc %}
        <div class="mb-2">
            <h5 class="text-primary">{{ clas.id }} - {{ clas.NomClasse }}</h5>
        </div>

        {% if DocClass %}
            <div class="table-responsive">
                <table class="table table-striped table-bordered table-sm">
                    <thead class="table-success">
                        <tr>
                            <th>Discipline</th>
                            <th>Niveau</th>
                            <th>Titre</th>
                            <th>Type</th>
                            <th>Document</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for doc in DocClass %}
                            {% if doc.maclasse.id == clas.id %}
                                <tr>
                                    <td>{{ doc.Discipline }}</td>
                                    <td>{{ doc.Niveau }}</td>
                                    <td>{{ doc.Titre }}</td>
                                    <td>{{ doc.TypeDoc }}</td>
                                    <td>
                                        {% if doc.Document %}
                                            <a href="{{ doc.Document.url }}" download class="btn btn-sm btn-outline-primary">T√©l√©charger</a>
                                        {% else %}
                                            Aucun document
                                        {% endif %}
                                    </td>
                                </tr>
                            {% endif %}
                        {% empty %}
                            <tr>
                                <td colspan="5" class="text-center text-danger">Aucun document trouv√©.</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <div class="pagination">

                    {% if DocClass.has_previous %}
                        <a class="btn btn-primary btn-sm" href="?page_DocClass={{ DocClass.previous_page_number }}">Pr√©c√©dent</a>
                    {% endif %}

                    <span>Page {{ DocClass.number }} / {{ DocClass.paginator.num_pages }}</span>

                    {% if DocClass.has_next %}
                        <a class="btn btn-primary btn-sm" href="?page_DocClass={{ DocClass.next_page_number }}">Suivant</a>
                    {% endif %}

                </div>
            </div>
        {% else %}
            <div class="alert alert-danger text-center">Aucun document disponible pour cette classe.</div>
        {% endif %}
        <hr>
    {% endfor %}
</div>

            <hr class="thick-hr">
        </div>

         <div class="col-md-6 col-xs-6 col-sm-6 col-lg-6 shadow">
             <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12">
              <div class="m-2 text-danger"><center><img  width="10%" src="https://www.francegenerosites.org/wp-content/uploads/2019/01/Groupe-de-travail.jpg" class="img-fluid"   alt="FaceSchool"/><b class="titre-principal">Mes Groupes d'Etude</b></center></div>
                {% if Mesgroupes %}
               <table class="table table-striped table-bordered table-responsive m-3">
                  <thead class="table-success">
                    <tr>

                      <th width="5%">#</th>
                      <th width="20%">logo</th>
                      <th width="25%">Groupe</th>
                      <th width="20%">Niveau</th>
                      <th width="25%">Responsable</th>
                      <th width="25%">Contact</th>
                      <th width="25%">Documents</th>
                    </tr>
                  </thead>
                  <tbody>
                     {% for group in Mesgroupes %}
                        <tr>

                          <td><a  href="{% url 'AjouterApprenGrpEtude' group.id %}">{{group.id}}</a></td>
                          <td><a  href="{% url 'AjouterApprenGrpEtude' group.id %}"><img src="{{group.logo.url }}" alt="Photo" width="80"></a></td>
                          <td>{{group.Groupe}}</td>
                            <td>{{group.Niveau_id}}</td>
                             <td>{{group.Responsable}}</td>
                          <td>{{group.Contact}}</td>
                          <td width="15%">
                              <a   href="{% url 'ListeDocumentPartGrpEtude' group.id %}"><img width="30%" src="https://static.vecteezy.com/ti/vecteur-libre/t1/8292836-dossier-avec-documents-emploi-entreprise-et-finance-embauche-dossier-de-documents-avec-feuilles-de-papier-et-notes-adhesives-illustration-de-dessin-anime-isoler-sur-fond-blanc-vectoriel.jpg" class="img-fluid" alt="FaceSchool"/></a>
                          </td>
                        </tr>
                    {% endfor %}

                  </tbody>
              </table>
                 <div class="pagination">

                    {% if Mesgroupes.has_previous %}
                        <a class="btn btn-primary btn-sm" href="?page_DocClass={{ DocClass.previous_page_number }}">Pr√©c√©dent</a>
                    {% endif %}

                    <span>Page {{ Mesgroupes.number }} / {{ Mesgroupes.paginator.num_pages }}</span>

                    {% if Mesgroupes.has_next %}
                        <a class="btn btn-primary btn-sm" href="?page_DocClass={{ DocClass.next_page_number }}">Suivant</a>
                    {% endif %}

                </div>
            {% endif %}
            </div>
             <hr class="thick-hr">
            <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12">
               <div class="m-2 text-danger"><center><b><img  width="10%" src="https://www.egfbtp.com/wp-content/uploads/2021/06/partenariat.jpg" class="img-fluid"   alt="FaceSchool"/><b class="titre-principal">Mes Groupes Etudes Partenaires</b></center></div>

              <table class="table table-striped table-bordered table-responsive m-3">
                  <thead class="table-success">
                    <tr>
                        <!--th>#</th-->
                      <th width="25%">Groupe Partenaires</th>
                      <th>Responsable</th>
                      <th>Contact</th>
                      <th width="15%">Documents Partenaires</th>

                    </tr>
                  </thead>
                  <tbody>

                     {% for Listes in ListePartenariatsGrp %}

                                <tr>
                                  <!--th>{{ Listes.id }}</th-->
                                  {% if  Listes.id != group.id %}

                                      <td style="color: red">{{ Listes.Groupe}}-{{ Listes.id}}</td>
                                      <td>{{Listes.Niveau}}</td>
                                      <td>{{Listes.Responsable}}</td>
                                      <td width="15%">
                                          <a   href="{% url 'ListeDocumentPartGrpEtude' Listes.id %}"><img width="30%" src="https://static.vecteezy.com/ti/vecteur-libre/t1/8292836-dossier-avec-documents-emploi-entreprise-et-finance-embauche-dossier-de-documents-avec-feuilles-de-papier-et-notes-adhesives-illustration-de-dessin-anime-isoler-sur-fond-blanc-vectoriel.jpg" class="img-fluid" alt="FaceSchool"/></a>
                                      </td>

                                  </tr>
                                {% endif %}

                     {% empty %}
                        <hr>
                        <tr><td colspan="30"><center style="color: red">Aucun partenariat trouv√©.</center></td></tr>
                    {% endfor %}

                  </tbody>
              </table>

            </div>
             <hr class="thick-hr">
              <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12">
                <div class="col-12 shadow p-3 rounded mb-4">
    <div class="text-center mb-3">
        <img width="10%" src="https://media.istockphoto.com/id/136804993/fr/photo/isol%C3%A9-vue-de-contenir-un-fichier-de-dossiers-sur-fond-blanc.jpg?s=612x612&w=0&k=20&c=vELavkwpovpAbH1TiVIjVZbW6Lx9yzEhP1S-IUpOBSA=" class="img-fluid" alt="Documents Publics"/>
        <h4 class="text-danger mt-2">Documents Publics Par Mati√®re</h4>
    </div>

    {% for disc in Disciplines %}
        <p><strong>Discipline :</strong> <span class="text-primary">{{ disc.discipline }} - {{ Appren.Niveau }}</span></p>

        <div class="table-responsive">
            <table class="table table-striped table-bordered table-sm">
                <thead class="table-success">
                    <tr>
                        <th>Type</th>
                        <th>Titre</th>
                        <th>Lien</th>
                        <th>Documents</th>
                        <th>Date D√©pot</th>
                        <th>Auteur</th>
                    </tr>
                </thead>
                <tbody>
                    {% for doc in DocPublic %}
                        {% if doc.discipline_id == disc.id %}
                            <tr>
                                <td>{{ doc.TypeDoc }}</td>
                                <td>{{ doc.Titre }}</td>
                                <td>
                                    {% if doc.Dossier_link %}
                                        <a href="{{ doc.Dossier_link }}" target="_blank">Voir</a>
                                    {% else %}
                                        -
                                    {% endif %}
                                </td>
                                <td>
                                    {% if doc.Document %}
                                        <a href="{{ doc.Document.url }}" download class="btn btn-sm btn-outline-primary">T√©l√©charger</a>
                                    {% else %}
                                        Aucun document
                                    {% endif %}
                                </td>
                                <td>{{ doc.create_at|date:"d/m/Y H:i" }}</td>
                                <td>{{ doc.username.username }}</td>
                            </tr>
                        {% endif %}
                    {% empty %}
                        <tr>
                            <td colspan="6" class="text-center">Aucun document trouv√©.</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div class="pagination">

                    {% if DocPublic.has_previous %}
                        <a class="btn btn-primary btn-sm" href="?page_DocPublic={{ DocPublic.previous_page_number }}">Pr√©c√©dent</a>
                    {% endif %}

                    <span>Page {{ DocPublic.number }} / {{ DocPublic.paginator.num_pages }}</span>

                    {% if DocPublic.has_next %}
                        <a class="btn btn-primary btn-sm" href="?page_DocClass={{ DocClass.next_page_number }}">Suivant</a>
                    {% endif %}

            </div>
        </div>
        <hr>
    {% endfor %}
</div>

             <hr class="thick-hr">
            </div>
        </div>
    </div>

</div>
</div>


{% endblock content %}